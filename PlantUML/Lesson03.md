# 类型关系的表示

## 继承和实现

类之间的继承关系需要额外的类关系说明语句定义。类之间的继承关系使用 `<|--` 链接两个类名表示，箭头一侧是父类，箭尾一侧是子类。

类和接口之间则有实现关系。实现关系用 `<|..` 表示，箭头一侧是接口，箭尾一侧是类。例如：

```PlantUML
interface ICanMove{}

class Animal{

}

class Dog{

}

class Cat{

}

Animal <|-- Dog
Animal <|-- Cat
ICanMove <|.. Animal
```

渲染后 `<|--` 和 `<|..` 都使用空心大箭头，不过 `<|--` 是实线， `<|..` 是虚线。

## 依赖关系

如果类 A 的成员类型定义中用到了类 B，那么就可以说类 A 依赖类 B。依赖关系使用 `<..` 表示，箭头指向的 是被依赖的类。例如：

```PlantUML
class B{

}

class C{

}

class A{
    + B b
    + C GetC()
}

B <.. A
C <.. A
```

## 聚合关系与组合关系

聚合关系是升级版的依赖关系。当一个整体是若干部分聚合而成的则使用聚合关系。聚合关系用 `<..o` 表示。带 `o` 的一侧是作为整体的类，渲染时它会变成空心菱形。

例如:

```PlantUML
class Workspace{
    + Table table
    + Chair chair
}

class Table{

}

class Chair{

}

Table <..o Workspace
Chair <..o Workspace
```

组合关系类似聚合关系，只不过组合关系的组件被破坏会危机整体。例如人类身体和各个器官就是组合关系。组合关系使用 `<..*` 表示， `*` 一侧是整体，在渲染时渲染为黑色菱形。

值得注意的是，一般 UML 中的组合和聚合关系其实在编程语言中并没有特别严格的语法与之对应。它们往往表示语义层面的关系。这难免造成不严谨，这里我们对这两种关系做一些限制。

首先，不论组合还是聚合，作为部分的类在整体中必须作为属性出现，如果仅仅是在方法原型中出现则不算。仅仅是函数原型中出现，则可以视作普通依赖关系。

其二，组合关系中的整体在实例化时必须先实例化各个部分最后实例化整体。而聚合关系允许先实例化实体，以后有机会再实例化各个部分。例如地址簿中可以先给一个人预留一页，只写名字，以后有机会再填写电话和地址等。但对于汽车来说，不可能汽车都出厂了轮子还在流水线上。

其三，聚合和组合中作为部分的实例以通过整体访问他们为主要访问方式。否则就只能是普通依赖关系。例如一个学生类中有访问老师类的方法，但你也可以不经过学生类直接访问老师，所以老师并不是学生的一部分，学生类对老师类只是普通依赖关系。

## 多重性

在普通各种依赖关系中，可能存在一些多一关系。这时可以用多重性标记表示。多重性标记其实就是一种闭区间记号。用 `..` 左右链接两个数字，就表示从左到右的闭区间例如 `0..5` 表示 0 到 5 个， `1..1` 表示必须是 1 个。 `*` 表示无穷大，例如 `1..*` 表示 1 个以上。

在写关系语句时，左右都可以加这种标记。当它加在一侧，则表示一个另一侧的类实例最多可以与这么多个这一侧类实例发生此种关系，例如：

```PlantUML
Hand "0..2" <..* Human 
```

表示一个人有 0 到 2只手。

```PlantUML
Hand <..* "0..1" Human 
```

表示一只手最多属于一个人。

以上两个条件合写就是：

```PlantUML
Hand "0..2" <..* "0..1" Human 
```

## 箭头方向

本节介绍的箭头符号大部分可以反过来写例如：

```PlamtUML
A <|-- B
```

也可以写作：

```PlantUML
B --|> A
```
